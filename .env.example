# ==========================================
# DHRUVA PGRS - ENVIRONMENT VARIABLES
# ==========================================
# Copy this file to .env and fill in your values
# NEVER commit .env to git (it's in .gitignore)

# ==========================================
# APPLICATION SETTINGS
# ==========================================
ENVIRONMENT=development
API_VERSION=1.0.0
API_BASE_URL=http://localhost:8000
DEBUG=true

# ==========================================
# DATABASE CONFIGURATION (PostgreSQL)
# ==========================================
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/dhruva_pgrs
TEST_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/dhruva_pgrs_test
DATABASE_ECHO=false
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ==========================================
# REDIS CONFIGURATION
# ==========================================
REDIS_URL=redis://localhost:6379/0
RATE_LIMIT_BACKEND=redis

# ==========================================
# JWT AUTHENTICATION
# ==========================================
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production-min-32-chars
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# ==========================================
# NLP SERVICE
# ==========================================
NLP_SERVICE_URL=http://localhost:5000
NLP_TIMEOUT_SECONDS=5
NLP_CONFIDENCE_THRESHOLD=0.70

# ==========================================
# FILE STORAGE
# ==========================================
STORAGE_BACKEND=local
UPLOAD_DIR=/var/dhruva/uploads
MAX_FILE_SIZE_MB=10

# ==========================================
# TWILIO (SMS & WhatsApp)
# ==========================================
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
TWILIO_PHONE_NUMBER=+14155238886

# ==========================================
# CORS CONFIGURATION
# ==========================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# ==========================================
# RATE LIMITING CONFIGURATION
# ==========================================
# Rate limits per user role (requests/window)
RATE_LIMIT_CITIZEN_GRIEVANCE_SUBMISSION=10/hour
RATE_LIMIT_CITIZEN_PUBLIC_TRACKING=20/hour
RATE_LIMIT_CITIZEN_OTP_REQUEST=3/5minutes
RATE_LIMIT_OFFICER_READ=200/minute
RATE_LIMIT_OFFICER_WRITE=50/minute
RATE_LIMIT_SUPERVISOR_READ=500/minute
RATE_LIMIT_SUPERVISOR_WRITE=100/minute
RATE_LIMIT_SUPERVISOR_BULK=10/hour
RATE_LIMIT_ADMIN_UNLIMITED=true
RATE_LIMIT_LOGIN_ATTEMPTS=5/minute

# ==========================================
# OTP CONFIGURATION
# ==========================================
OTP_EXPIRY_SECONDS=300
OTP_MAX_ATTEMPTS=3
OTP_REQUEST_LIMIT=3
OTP_REQUEST_WINDOW_SECONDS=300

# ==========================================
# ASYNC JOB CONFIGURATION
# ==========================================
JOB_RETENTION_HOURS=24
ASYNC_PROCESSING_ENABLED=false

# ==========================================
# PERFORMANCE BUDGETS (milliseconds)
# ==========================================
PERF_HEALTH_P95_MS=50
PERF_DATABASE_HEALTH_P95_MS=100
PERF_LOGIN_P95_MS=500
PERF_GRIEVANCE_SUBMIT_P95_MS=1000
PERF_GRIEVANCE_LIST_P95_MS=500
PERF_GRIEVANCE_GET_P95_MS=300

# ==========================================
# FEATURE FLAGS
# ==========================================
FEATURE_WEBSOCKET_ENABLED=false
FEATURE_BULK_OPERATIONS_ENABLED=true
FEATURE_PUBLIC_TRACKING_ENABLED=true

# ==========================================
# LOGGING
# ==========================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/dhruva/app.log

# ==========================================
# MONITORING & TELEMETRY
# ==========================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
